/*
 * MOOPH = Module for Object Oriented Pseudomultithreaded Hypertext
 * Copyright 2013-2015 Cenek Svoboda, svobo.c@gmail.com
 */
var MOOPH=(function(){if(typeof window.performance==="undefined"){window.performance={};}if(!window.performance.now){window.performance.now=function(){return new Date().getTime();};}var _pts=[];return {createPseudoThread:function(){var _ptid=_pts.length;_pts[_ptid]={};_pts[_ptid].p=true;_pts[_ptid].imflt=false;_pts[_ptid].imbc=true;_pts[_ptid].td=1;_pts[_ptid].md=0;_pts[_ptid].lt=0;_pts[_ptid].ct=window;_pts[_ptid].ft=function(ptid){if(_pts[ptid].p===true){return;}var now=window.performance.now();if(now>_pts[ptid].lt+_pts[ptid].md){var imbc=_pts[ptid].imbc;if(!imbc){_pts[ptid].funct.call(_pts[ptid].ct,_pts[ptid].prms);}if(_pts[ptid].imflt){_pts[ptid].lt+=_pts[ptid].md;}else{if(!imbc){_pts[ptid].lt=window.performance.now();}else{_pts[ptid].lt=now;}}if(imbc){_pts[ptid].funct.call(_pts[ptid].ct,_pts[ptid].prms);}}var fun=function(){_pts[ptid].ft(ptid);};setTimeout(fun,_pts[ptid].td);};return {setFunction:function(funct){_pts[_ptid].funct=funct;},setContext:function(cont){_pts[_ptid].ct=cont;},setParameters:function(pr){_pts[_ptid].prms=pr;},setTimeoutDelay:function(td){_pts[_ptid].td=td;},setMeasuredDelay:function(md){_pts[_ptid].md=md;},setMeasuredFromLastTime:function(imflt){_pts[_ptid].imflt=imflt;},setMeasuredBeforeCall:function(imbc){_pts[_ptid].imbc=imbc;},start:function(){_pts[_ptid].p=false;_pts[_ptid].lt=window.performance.now();_pts[_ptid].ft(_ptid);},pause:function(){_pts[_ptid].p=true;}};}};}());
