/*
 * MOOPH = Module for Object Oriented Pseudomultithreaded Hypertext
 * Copyright 2013-2014 Cenek Svoboda, svobo.c@gmail.com
 */
var MOOPH=(function(){if(typeof window.performance==='undefined'){window.performance={};}if(!window.performance.now){window.performance.now=function(){return new Date().getTime();};}var _fts=[];return {createFalseThread:function(){var _ftid=_fts.length;_fts[_ftid]={};_fts[_ftid].p=true;_fts[_ftid].imflt=false;_fts[_ftid].imbc=true;_fts[_ftid].td=1;_fts[_ftid].md=0;_fts[_ftid].lt=0;_fts[_ftid].ct=window;_fts[_ftid].ft=function(ftid){if(_fts[ftid].p===true){return;}var now=window.performance.now();if(now>_fts[ftid].lt+_fts[ftid].md){var imbc=_fts[ftid].imbc;if(!imbc){_fts[ftid].funct.call(_fts[ftid].ct,_fts[ftid].prms);}if(_fts[ftid].imflt){_fts[ftid].lt+=_fts[ftid].md;}else{if(!imbc){_fts[ftid].lt=window.performance.now();}else{_fts[ftid].lt=now;}}if(imbc){_fts[ftid].funct.call(_fts[ftid].ct,_fts[ftid].prms);}}var fun=function(){_fts[ftid].ft(ftid);};setTimeout(fun,_fts[ftid].td);};return {setFunction:function(funct){_fts[_ftid].funct=funct;},setContext:function(cont){_fts[_ftid].ct=cont;},setParameters:function(pr){_fts[_ftid].prms=pr;},setTimeoutDelay:function(td){_fts[_ftid].td=td;},setMeasuredDelay:function(md){_fts[_ftid].md=md;},setMeasuredFromLastTime:function(imflt){_fts[_ftid].imflt=imflt;},setMeasuredBeforeCall:function(imbc){_fts[_ftid].imbc=imbc;},start:function(){_fts[_ftid].p=false;_fts[_ftid].lt=window.performance.now();_fts[_ftid].ft(_ftid);},pause:function(){_fts[_ftid].p=true;}};}};}());
