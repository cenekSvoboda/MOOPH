/*
 * MOOPH = Module for Object Oriented Pseudomultithreaded Hypertext
 * Copyright 2013 Cenek Svoboda, svobo.c@gmail.com
 */
var MOOPH=(function(){var _fs=[];return {createFalseThread:function(){var _ftid=_fs.length;_fs[_ftid]={};_fs[_ftid].pause=true;_fs[_ftid].imflt=false;_fs[_ftid].imbc=true;_fs[_ftid].td=1;_fs[_ftid].md=0;_fs[_ftid].lt=0;_fs[_ftid].f=function(ftid){if(_fs[ftid].pause===true){return;}var now=new Date().getTime();if(now>_fs[ftid].lt+_fs[ftid].md){var imbc=_fs[ftid].imbc;if(!imbc){_fs[ftid].funct(_fs[ftid].prms);}if(_fs[ftid].imflt){_fs[ftid].lt+=_fs[ftid].md;}else{if(!imbc){_fs[ftid].lt=new Date().getTime();}else{_fs[ftid].lt=now;}}if(imbc){_fs[ftid].funct(_fs[ftid].prms);}}var fun=function(){_fs[ftid].f(ftid);};setTimeout(fun,_fs[ftid].td);};return {setFunction:function(funct){_fs[_ftid].funct=funct;},setParameters:function(prms){_fs[_ftid].prms=prms;},setTimeoutDelay:function(td){_fs[_ftid].td=td;},setMeasuredDelay:function(md){_fs[_ftid].md=md;},setMeasuredFromLastTime:function(imflt){_fs[_ftid].imflt=imflt;},setMeasuredBeforeCall:function(imbc){_fs[_ftid].imbc=imbc;},start:function(){_fs[_ftid].pause=false;_fs[_ftid].lt=new Date().getTime();_fs[_ftid].f(_ftid);},pause:function(){_fs[_ftid].pause=true;}};}};}());
